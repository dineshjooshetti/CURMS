{% extends 'pcmi/base.html' %}
{% block body %}
    {% load static %}


    <link rel="stylesheet" href="{% static 'assets/timeline.css' %}" type="text/css">
    <style>
        .btn-cus-yellow{
            background-color: #F2C94C;
            border: 1px solid #ab903e;
            color: black;
            z-index: 99;
            font-size: 14px;

        }
        .nav-pills .nav-link.active, .nav-pills .show > .nav-link {
            background-color: #7f0000!important;
        }
        .hover{
            color:#6b7480 !important;
        }
        .hover.active{
            color: white !important;
        }
		.card .table td, .card .table th {
			padding-right: 0.5rem;
			padding-left: 0.5rem;
		}
		.custom_credit_input{
			line-height: 22px;
			font-size: 13px;

		}
    </style>
    <link href="{% static 'assets/vendor/select2/dist/css/select2.min.css' %}" rel="stylesheet">
    <link href="{% static 'assets/css/select2.css' %}" rel="stylesheet">
    <div class="header">
        <div class="container-fluid">
            <div class="header-body">
                <div class="row align-items-center py-4">
                    <div class="col-lg-8 col-7">
                        <nav aria-label="breadcrumb" class="d-none d-md-inline-block ml-md-4">
                            <ol class="breadcrumb breadcrumb-links breadcrumb-dark">
                                <li class="breadcrumb-item"><a href="/"><i class="fas fa-home"></i></a></li>
                                <li class="breadcrumb-item" aria-current="page">Programme Details</li>
                            </ol>
                        </nav>
                    </div>

                </div>
            </div>
        </div>
    </div>

    <div class="container-fluid ">
        {% if messages %}
            {% for message in messages %}
            {% if message.tags == 'error' %}
            <div class="alert alert-danger" style="width: 500px;">
                <a class="close" href="#" data-dismiss="alert">Ã—</a>
                   {{ message }}
            </div>
            {% endif %}
            {% endfor %}
        {% endif %}
        <div class="nav-wrapper">
            <ul class="nav nav-pills nav-fill flex-column flex-md-row" id="tabs-icons-text" role="tablist">
                <li class="nav-item">
                    <a class="nav-link mb-sm-3 mb-md-0 hover active" id="tabs-icons-text-1-tab" data-toggle="tab" href="#tabs-icons-text-1" role="tab" aria-controls="tabs-icons-text-1" aria-selected="true"><i class="fa fa-file-alt mr-2"></i>PROGRAMME STRUCTURE</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link mb-sm-3 mb-md-0 hover" id="tabs-icons-text-2-tab" data-toggle="tab" href="#tabs-icons-text-2" role="tab" aria-controls="tabs-icons-text-2" aria-selected="false"><i class="far fa-comment-dots mr-2"></i>SUGGESTIONS & TIMELINE</a>
                </li>
            </ul>
        </div>
        <div class="card shadow">
			<div class="card-header"><h3 class="text-center text-default"> {{program.0.name}}</h3></div>
            <div class="card-body">
				
                <div class="tab-content" id="myTabContent">
                    <div class="tab-pane fade show active" id="tabs-icons-text-1" role="tabpanel" aria-labelledby="tabs-icons-text-1-tab">
                       <br>
                       {% for j in course_categories %}
                            <div class="row">
                                <div class="col-md-3"><h3 class="text-left text-default"> {{j.category}}</h3></div>
								<div class="col-md-5">
									<form action="/pcmi/program_course_category_count" method="POST">{%csrf_token%}
									<div class="row">
									<div class="col-md-4" >
										  <div class="form-group">
													<input type="number" style="width:130px;" class="custom_credit_input" style="float:left" placeholder="Enter no of Credits" min="0" step="1" name="credit_count" value="{% for i in p_c_mpapping %}{% if i.category_id == j.id %}{{i.count}}{% endif %}{% endfor %}" required>
													<input type="hidden" class="form-control" name="cat_id" value="{{j.id}}">
													<input type="hidden" class="form-control" name="program_id" value="{{program.0.id}}">
													<input type="hidden" class="form-control" name="path" value="{{request.path}}">
												
											 </div>
									 </div>
                                        {% if  j.id  ==  5  %}
										<div class="col-md-6">
                                       <div class="form-group"  >
											<style>.select2-selection__rendered{height:39px;}.select2-selection--multiple{height:10px;}</style>
                                            <select class="select2" id="op_elective_category" name="label" multiple required>
                                                {% for l in course_categories_short_names %}
													
                                                   <option value="{{l.id}}" {% for i in p_c_mpapping %}{% if i.category_id == j.id and l.id|slugify in i.label_category %}selected{% endif %}{% endfor %} >{{l.short_code}}</option>
                                                {%endfor%}

                                            </select>
                                        </div>
										 </div>
                                    {%endif%}
										<div class="col-md-2">
                                        <div class="form-group">
                                            <input type="submit" class="btn bg_gitam btn-sm text-white" style="margin-left:10px">
                                        </div>
										</div>
									</div>
                                 </form>
								</div>
                                <div class="col-md-4">
                                    <div class="text-right">

                                        {% if j.id  ==  1 or j.id  ==  2 or j.id  ==  3  or j.id  ==  4   %}
											<!--button class="btn  btn-sm bg_gitam text-white add_group_button" id="{{j.id}}-example{{forloop.counter}}">Add Group </button-->
                                          <a href="/pcmi/pcmi_program_courses/{{ program_id }}/{{j.id}}" {% if program_user_mapping.is_edit == 1 %}disabled {% endif %} class="btn btn-sm bg_gitam text-white">&nbsp;+Import Courses</a>
                                          <a href="/pcmi/baskets/{{ program_id }}/{{j.id}}" {% if program_user_mapping.is_edit == 1 %}disabled {% endif %} class="btn btn-sm bg_gitam text-white">&nbsp;Baskets</a>
                                          <a href="/pcmi/groups/{{ program_id }}/{{j.id}}" {% if program_user_mapping.is_edit == 1 %}disabled {% endif %} class="btn btn-sm bg_gitam text-white">&nbsp;Groups</a>
                                        {%endif%}
                                    </div>
                                </div>
								
                            </div>

                                
                             {% if  j.id  ==  5  %}

                                <div class="row">
                                    <div class="col-md-12"><h5 style="color:#000" class="text-center">
                                    #Student will Opt eligible {%for i in p_c_mpapping_op_elective %} {{i.short_code}}{%if not forloop.counter == p_c_mpapping_op_elective|length%}/{%endif%} {%endfor%}courses from other programmes as an open elective courses and earn {% for i in p_c_mpapping %}{% if i.category_id == j.id %}{{i.count}}{% endif %}{% endfor %} credits
                                    </h5></div>
                                </div>
                             {%else%}
                            <div class="table-responsive py-2" >
                                <table id="example{{forloop.counter}}" class="table table-bordered table-striped">
                                <thead >
                                  <tr>
                                    <th>Sno</th>
									<!--th style="display:none"></th-->
									<th>Course Code</th>
                                    <th>Course Name</th>
                                    <th>Course Type</th>
                                   
                                    <th>Level</th>
                                    <th>L</th>
                                    <th>T</th>
                                    <th>P</th>

                                    <th>S</th>
                                     <th>J</th>
                                    <th>C</th>
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for i in j.program_course_data %}
								
                                  <tr>
                                    <td>{{ forloop.counter }}</td>
									<!--td style="display:none"><input type="checkbox" name="course_id" value="{{i.row_type}}-{{i.id}}" ></td-->
                    
									 <td>{% if i.course_code %}{{ i.course_code }}{%else%}XXXXXX{%endif%}</td>
                                   
                                    <td><a title="View Syllabus" data-toggle="tooltip" data-placement="top" href="/pcmi/course_preview_by_pcmi/{{program_id}}/{{i.encrypt_id}}">{{ i.course_name }}{%if i.faculty is False %}^{%endif%}{%if i.group_symbol%}{{i.group_symbol}} {%endif%}</a></td>
                                    <td>{{ i.course_type }}</td>

                                    <td>{% if i.course_level %}{{ i.course_level }}{%else%}-{%endif%}</td>
                                    <!--td>{{ i.course__program_type__type }}</td-->
                                    <td>{{ i.L }}</td>
                                    <td>{{ i.T}}</td>
                                    <td>{{ i.P}}</td>
                                    <td>{{ i.S}}</td>
                                    <td>{{ i.J}}</td>
                                    <td>{{ i.C}}{%if i.pass_fail is True%}<span>*</span>{%endif%}</td>
                                    <!--td>{% if i.csmi_name%}{{ i.csmi_name }}{% else %}-{% endif %}</td>
                                    <td>{% if i.csmm_name%}{{ i.csmm_name }}{% else %}-{% endif %}</td>
                                    <td>{{i.course_status}}</td-->
                                    <td>
                                        <a title="Delete" data-toggle="tooltip" data-placement="top" href="/pcmi/delete_course_from_program/{{ program_id }}/{{i.encrypt_id}}" style="color: #7f0000">&nbsp;<i class="fa fa-trash" aria-hidden="true"></i></a>
                                        {%if i.row_type == 'basket' %}
										<a title="Edit" class="edit_basket" data-toggle="tooltip" id="{{ i.course_name }}-{{ i.choice_count }}-{{ i.course_type_id }}-{{ i.level_of_course_id }}-{{i.L}}-{{ i.T}}-{{ i.P}}-{{ i.S}}-{{ i.J}}-{{ i.C}}-{{i.basket_id}}" data-placement="top" href="javascript:void(0)" style="color: #7f0000">&nbsp;<i class="fa fa-edit" aria-hidden="true"></i></a>
                                        {%endif%}
									 </td>

                                  </tr>

                                {% endfor %}

                                </tbody>
                              </table>
							
                            </div>
							<div style="font-style: italic;font-size:14px;font-weight:bold">*  Pass/Fail courses<br>
								^ Online/Swayam/NPTEL Courses<br>
								{% for m in j.group_data%}
									{{m.symbol}} Opt any {{m.choice_count}} courses amoung {{m.group_courses|length}}<br>
								{%endfor%}
								
							</div>
							{%if j.basket_data%}
								{%for k in j.basket_data%}
								<div class="table-responsive py-2" style="padding-left:50px;padding-right:50px" ><h4 class="text-center text-default">{{k.basket_name}}</h4>
                                <table id="example{{forloop.counter}}_{{k.id}}" class="table table-bordered table-striped">
                                <thead >
                                  <tr>
                                    <th>Sno</th>
									<th>Course Code</th>
                                    <th>Course Name</th>
                                    <th>Course Type</th>
                                    <th>Level</th>
                                    <!--th>Program Type</th-->
                                    <th>L</th>
                                    <th>T</th>
                                    <th>P</th>

                                    <th>S</th>
                                     <th>J</th>
                                    <th>C</th>
                                    <!--th>CSMI</th>
                                    <th>CSMM</th>
                                    <th>Status</th-->
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for l in k.basket_courses %}
								
                                  <tr>
                                    <td>{{ forloop.counter }}</td>
									 <td>{% if l.course__course_code %}{{ l.course__course_code }}{%else%}XXXXXX{%endif%}</td>
                                   
                                    <td><a title="View Syllabus" data-toggle="tooltip" data-placement="top" href="/pcmi/course_preview_by_pcmi/{{program_id}}/{{i.encrypt_id}}">{{ l.course__course_name }}</a></td>
                                    <td>{{ l.course__course_type__name }}</td>

                                    <td>{% if l.course__course_level %}{{ l.course__course_level }}{%else%}-{%endif%}</td>
                                    <!--td>{{ i.course__program_type__type }}</td-->
                                    <td>{{ l.course__L }}</td>
                                    <td>{{ l.course__T}}</td>
                                    <td>{{ l.course__P}}</td>
                                    <td>{{ l.course__S}}</td>
                                    <td>{{ l.course__J}}</td>
                                    <td>{{ l.course__C}}{%if l.course__pass_fail is True%}*{%endif%}</td>
                                    <!--td>{% if i.csmi_name%}{{ i.csmi_name }}{% else %}-{% endif %}</td>
                                    <td>{% if i.csmm_name%}{{ i.csmm_name }}{% else %}-{% endif %}</td>
                                    <td>{{i.course_status}}</td-->
                                    <td>
                                        <a title="Delete" data-toggle="tooltip" data-placement="top" href="/pcmi/delete_course_from_program/{{ program_id }}/{{i.encrypt_id}}" style="color: #7f0000">&nbsp;<i class="fa fa-trash" aria-hidden="true"></i></a>
                                        <!--a  title="ADD Pso" data-toggle="tooltip" data-placement="top" href="/pcmi/po_pso_mapping/{{ program_id }}/{{i.id}}" style="color: #fff" class="btn-sm btn-cus-yellow">&nbsp;POs PSOs</a-->
                                    </td>

                                  </tr>

                                {% endfor %}

                                </tbody>
                              </table>
                            </div>
								{%endfor%}
							{%endif%}
							
							<!---   Groups --->
							{%if j.basket_data%}
								{%for k in j.group_data%}
								<!--div class="table-responsive py-2" style="padding-left:50px;padding-right:50px" ><h4 class="text-center text-default">{{k.group_name}}</h4>
                                <table id="example{{forloop.counter}}_{{k.id}}" class="table table-bordered table-striped">
                                <thead >
                                  <tr>
                                    <th>Sno</th>
									<th>Course Code</th>
                                    <th>Course Name</th>
                                    <th>Course Type</th>
                                    <th>Level</th>
                                    
                                    <th>L</th>
                                    <th>T</th>
                                    <th>P</th>

                                    <th>S</th>
                                     <th>J</th>
                                    <th>C</th>
                                   
                                    <th>Action</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for l in k.group_courses %}
								
                                  <tr>
                                    <td>{{ forloop.counter }}</td>
									 <td>{% if l.course__course_code %}{{ l.course__course_code }} {%elif l.course_code %} {{l.course_code}} {%else%}XXXXXX{%endif%}</td>
                                   
                                    <td><a title="View Syllabus" data-toggle="tooltip" data-placement="top" href="/pcmi/course_preview_by_pcmi/{{program_id}}/{{i.encrypt_id}}">{% if l.course__course_name %}{{ l.course__course_name }} {%elif l.course_name%} {{l.course_name}} {%endif%}</a></td>
                                    <td>{% if l.course__course_type__name %}{{ l.course__course_type__name }} {%elif l.course_type__name%} {{l.course_type__name}}{%endif%}</td>

                                    <td>{% if l.course__course_level %}{{ l.course__course_level }}{%elif l.course_level%}{{l.course_level}}{%else%}-{%endif%}</td>
                                    <td>{% if l.course__L %}{{ l.course__L }}{%elif l.L %} {{l.L}} {%endif%}</td>
                                    <td>{% if l.course__T %}{{ l.course__T}}{%elif l.T %} {{l.T}}  {%endif%}</td>
                                    <td>{% if l.course__P %}{{ l.course__P}}{%elif l.P %} {{l.P}} {%endif%}</td>
                                    <td>{% if l.course__S %}{{ l.course__S}}{%elif l.S %} {{l.S}}  {%endif%}</td>
                                    <td>{% if l.course__J %}{{ l.course__J}}{%elif l.J %} {{l.J}} {%endif%}</td>
                                    <td>{% if l.course__C %}{{ l.course__C}}{%elif l.C %} {{l.C}}  {%endif%}{%if l.course__pass_fail is True%}*{%endif%}</td>
                                    <td>
                                        <a title="Delete" data-toggle="tooltip" data-placement="top" href="/pcmi/delete_course_from_group/{{ program_id }}/{{l.encrypt_id}}" style="color: #7f0000">&nbsp;<i class="fa fa-trash" aria-hidden="true"></i></a>
                                    </td>

                                  </tr>

                                {% endfor %}

                                </tbody>
                              </table>
                            </div-->
								{%endfor%}
							{%endif%}
							
                            {%endif%}
                        <hr>
                       {%endfor%}
                       <!--minor core-->
                            <div class="row">
                                <div class="col-md-4"><h3 class="text-left text-default"> Minor Core</h3></div>
                                <div class="col-md-4">
									<form action="/pcmi/program_course_category_count" method="POST">{%csrf_token%}
                                <div class="row">
                                       <div class="form-group" style="float:left">
                                            <input type="number" class="custom_credit_input" placeholder="Enter no of Credits" min="0" step="1" name="credit_count" value="{% for i in p_c_mpapping %}{% if i.category_id == 9 %}{{i.count}}{% endif %}{% endfor %}" required>
                                            <input type="hidden" class="form-control" name="cat_id" value="9">
                                            <input type="hidden" class="form-control" name="program_id" value="{{program.0.id}}">
                                            <input type="hidden" class="form-control" name="path" value="{{request.path}}">
                                        </div>
                                    
                                    
                                        <div class="form-group">
                                            <input type="submit" class="btn bg_gitam btn-sm text-white" style="margin-left:10px">
                                        </div>
                                   

                                </div><br>
                                 </form>
								</div>
								<div class="col-md-4">
                                    <div class="text-right">
                                        <a href="/pcmi/minor_program_mapping/{{ program_id }}" {% if program_user_mapping.is_edit == 1 %}disabled {% endif %} class="btn gbn-sm bg_gitam text-white">&nbsp;+Add Minor Programmes</a>
                                      </div>
                                </div>
                            </div>
                            
                            <div class="table-responsive py-4">
                                <table id="example" class="table table-bordered table-striped">
                                <thead >
                                  <tr>
									<th>Sno</th>
									<th>Course Code</th>
                                    <th>Course Name</th>
									<th>Course Type</th>
									<th>Level</th>
                                    <th>Program Type</th>
                                    <th>L</th>
                                    <th>T</th>
                                    <th>P</th>
                                    <th>S</th>
                                    <th>J</th>
                                    <th>C</th>
                                    <th>CSMI</th>
                                    <th>CSMM</th>
                                    <th>Status</th>
                                </tr>
                                </thead>

                                <tbody>
                             {% for p in minor_programs %}
                                     <tr>
                                        <td colspan="13"><h4 class="text-center text-default"> {{p.mapped_program__name}}&nbsp;<a href="/pcmi/delete_minor_core_program/{{ program_id }}/{{p.enc_mapped_id}}" style="color: red" >&nbsp;<i class="fa fa-trash" aria-hidden="true"></i></a>
                                       </h4>
                                        </td>
                                    </tr>
                                {% for i in p.course_data %}
                                  <tr>
                                    <td>{{ forloop.counter }}</td>
									  <td>{% if i.course_code %}{{ i.course_code }}{%else%}XXXXXX{%endif%}</td>
                                    
                                    <td>{{ i.course_name }}</td>
                                    <td>{{ i.course_type__name }}</td>
                                    <td>{% if i.level_of_course__level %}{{ i.level_of_course__level }}{%else%}-{%endif%}</td>
                                    <td>{{ i.program_type__type }}</td>

                                    <td>{{ i.L }}</td>
                                    <td>{{ i.T}}</td>
                                    <td>{{ i.P}}</td>
                                    <td>{{ i.S}}</td>
                                    <td>{{ i.J}}</td>
                                    <td>{{ i.C}}</td>
                                    <td>{% if i.csmi_name%}{{ i.csmi_name }}{% else %}-{% endif %}</td>
                                    <td>{% if i.csmm_name%}{{ i.csmm_name }}{% else %}-{% endif %}</td>
                                    <td>{{i.course_status}}</td>
                                  </tr>
                                {% endfor %}
                             {%endfor%}
                                </tbody>
                              </table>
                            </div>


                        <hr>
                       <!--minor core-->


                       <h3>Total credit distribution </h3>
                       <div class="table-responsive" style="width:500px">
                                <table id="example" class="table table-bordered table-striped">
                                <thead >
                                  <tr>
                                    <th>ID</th>
                                    <th>Type of Course</th>
                                    <th>Credits</th>
                                    <th>% of Program (in credits)</th>
                                </tr>
                                </thead>
                                <tbody>
                                {% for i in total_credit_distribution %}
                                  <tr>
                                    <td>{{ forloop.counter }}</td>
                                    <td>{{ i.category }}</td>
                                    <td>{{ i.credits }}</td>
                                    <td>{% if i.percentage == 0.0 %}0{%else%}{{ i.percentage }}%{%endif%}</td>

                                  </tr>
                                {% endfor %}
                                <tr><td></td> <td>Total</td> <td>{{total }}</td><td></td></tr>
                                </tbody>
                              </table>
                            </div>

                    {% if program_user_mapping.is_edit == 1 %}
                        {% if program_user_mapping.program_status_level_id == 3 or program_user_mapping.program_status_level_id == 1  or program_user_mapping.program_status_level_id == 16 or program_user_mapping.program_status_level_id == 13 or program_user_mapping.program_status_level_id == 19  %}
                        <center><button class="btn gbn-sm bg_gitam text-white mb-2 pcmi_forward_bosc mt-4" id="forward_pcmi">Syllabus Approve and Forward to Co-Chair, BoS </button></center>
                    {% endif %}
                    {% endif %}



                    </div>
                    <div class="tab-pane fade show" id="tabs-icons-text-2" role="tabpanel" aria-labelledby="tabs-icons-text-2-tab">
                        <h2 style="color:#7f0000;text-align: center">Timeline</h2>
                        <hr>
                        <!-- timeline -->
                        <div class="timeline">
                            {% for t in program_timeline %}
                                <div class="timeline__event  animated fadeInUp delay-1s timeline__event--type2">
                                    <div class="timeline__event__icon">
                                        <img src="{% if forloop.counter == 1  %}{{ t.to_user__image }}  {% else %}{{ t.user__image }}{% endif %}" class="timeline-userimg">
                                    </div>
                                    <div class="timeline__event__date">
                                        {% if forloop.counter == 1  %}{{ t.created }}{% else %}{{ t.created }}{% endif %}
                                    </div>
                                    <div class="timeline__event__content" style="width:75%">
                                        <div class="timeline__event__title">
                                            {% if forloop.counter == 1 %}{{ t.to_user__first_name }}<br> <span style="font-size: 14px">{{ t.to_user_group__description }}</span> {% else %}{{ t.user__first_name }} <br><span style="font-size: 14px">{{ t.user_group__description }}</span>{% endif %}<span class="status">{% if forloop.counter == 1 %}<span>Pending</span>{% else %}{{ t.program_status_level__title }}{% endif %}</span>

                                        </div>
                                        {% if forloop.counter == 1 %}

                                        {% else %}
                                            <div class="timeline__event__description">
                                                <p>TO: {{ t.to_user__first_name }} | {{ t.to_user_group__description }}</p>
                                                  {% if t.comment %}
                                                <p>{{ t.comment }}</p>
                                                 {%  endif %}
                                              </div>
                                        {% endif %}
                                    </div>
                                </div>
                            {% endfor %}



                        </div>
                        <!--- end timeline-->
                    </div>


                </div>

            </div>
        </div>
    </div>



<!-- Program Structure Modal popup -->
<div class="modal fade" id="staticModal1" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true" data-backdrop="static">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel" style="color: #7f0000">Forward Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            {% if below_credits %}
            <div class="modal-body" style="text-align: left">
                {% for i in below_credits %}
                  <h5 style="color: black">{{forloop.counter}}. {{i}} </h5>
                {% endfor %}<br>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>

            </div>
            {% else %}

            <div class="modal-body" style="text-align: center">
                <h3 style="color: black">Are you sure to forward to the Co-Chair, BoS?</h3>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <form action="/pcmi/forward_program_to_bosc_by_pcmi/{{ program_id }}" method="POST" enctype="multipart/form-data">{% csrf_token %}
                    <input type="hidden" id="path" name="path" class="path" value="{{request.path}}">
                     <input type="submit" style="background-color: #7f0000;color: white" class="btn btn-md" value="Submit">
                </form>

            </div>
            {% endif %}



        </div>
    </div>
</div>
<!-- End Program Structure Modal popup -->

<!-- Program Forward Modal popup -->
<div class="modal fade" id="staticModal" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true"
         data-backdrop="static">
        <div class="modal-dialog modal-md" role="document">
            <div class="modal-content">
                     <div class="modal-header">
                    <h5 class="modal-title" id="staticModalLabel">Forward Confirmation</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body" style="text-align: center;">
                    <h3 style="color: black">Are you sure to forward to the Co-Chair, BoS?</h3>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <form action="/pcmi/program_forward/{{ p_id }}" method="POST">{% csrf_token %}
                        <input type="hidden" id="program_id" name="program_id" value="{{ p_id }}">
                        <input type="hidden" id="bos_user_id" name="bos_user_id" value="{{ program_assign_details.user_id }}">
                        <input type="hidden" name="path" value="{{request.path}}">
                        <input type="hidden" name="program_status_level_id" value="{{ program_assign_details.program_status_level_id }}">
                        <input type="submit" class="btn btn-md" style="background-color: #7f0000;color: white;" value="Submit">
                    </form>
                </div>
            </div>
        </div>
    </div>
<!-- End Program Forward Modal popup -->



<!-- Course Assign Modal popup -->
<div class="modal fade" id="assign_cms" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true"
     data-backdrop="static">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">Assign CSM Committee</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <form action="/pcmi/course_assign" method="POST">{% csrf_token %}

                <div class="modal-body">
                    <input type="hidden" name="course_id" id="course_id">
                    <input type="hidden" id="program_id" name="program_id" value="{{ p_id }}">

                    <div class="row">
                        <div class="form-group col-md-6">
                            <span class="form-label">CSM Incharge</span>
                            <select class="form-control select2" aria-label=" select example" id="csmi" name="csmi" multiple>

                            </select>
                        </div>
                        <div class="form-group col-md-6">
                            <span class="form-label">CSM Member</span>
                            <select class="form-control select2" aria-label=" select example" id="csmc" name="csmc" multiple >

                            </select>
                        </div>
                    </div>


                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <input type="hidden" name="path" value="{{request.path}}">
                    <input type="submit" class="btn btn-md" style="background-color: #7f0000;color: white;" value="Submit">


                </div>
                <div class="row">
                <div class="col-md-12">
                    <ul>
                    <li><span class="form-label">CSM Incharge : Course Syllabus Modification committee Incharge</span></li>
                    <li><span class="form-label">CSM Member : Course Syllabus Modification committee Member</span></li>
                    </ul>
                </div>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Course Assign Modal popup -->

<!-- Delete Course Modal popup -->
<div class="modal fade" id="staticModal_delete" tabindex="-1" role="dialog" aria-labelledby="staticModalLabel" aria-hidden="true"
     data-backdrop="static">
    <div class="modal-dialog modal-md" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabel">Delete Confirmation</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body" style="text-align: center">
                <h3 style="color: black">Are you sure want to Delete ?</h3>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                <form action="/course/course_del" method="POST">
                    {% csrf_token %}
                    <input type="hidden" id="course_del" name="course_del" >
                    <input type="hidden" id="p_id" name="p_id" value="{{ p_id }}" >
                    <input type="hidden" name="path" value="{{request.path}}">
                    <input type="submit" class="btn btn-md" style="background-color: #7f0000;color: white;" value="Submit">
                </form>

            </div>
        </div>
    </div>
</div>
<!-- End Delete Course Modal popup -->

<!-- Add Group Modal popup -->
<div class="modal fade" id="add_group_popup" tabindex="-1" role="dialog" aria-labelledby="staticModalLabelgroup" aria-hidden="true"
     data-backdrop="static">
    <div class="modal-dialog modal-xl" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="staticModalLabelgroup">Create New Group</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
			<form action="/pcmi/add_group" id="add_group_form" method="POST">{% csrf_token %}
			<div class="modal-body">
					<input type="hidden" name="course_category_id" id="group_course_category_id">
                    <input type="hidden" id="program_id" name="program_id" value="{{ p_id }}">
                    <input type="hidden" id="group_id" name="group_id" value="">

                    <div class="row">
						<div class="form-group col-md-3">
                            <span class="form-label">Group Name</span>
                            <input type="text" class="form-control" placeholder="Group Name" id="group_name" name="group_name" required>
							
                            
                        </div>
						<div class="form-group col-md-3">
                            <span class="form-label">Required Course Count</span>
                            <input type="number" class="form-control" placeholder="Required Course Count" id="choice_count" name="choice_count" required>
						</div>
						<div class="form-group col-md-3">
                            <span class="form-label">Tag</span>
                            <input type="text" class="form-control" placeholder="Tag" id="symbol" min="1" max="1" name="symbol" required>
						</div>
                        <table id="add_group_popup_table" class="table"></table>
                        
                    </div>
					 

				 
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                    <input type="hidden" name="path" value="{{request.path}}">
                    <input type="submit" class="btn btn-md create_group_submit" style="background-color: #7f0000;color: white;" value="Submit">


                </div>
				</form>
                <div class="row">
                <div class="col-md-12">
                    <!--ul>
                    <li><span class="form-label">CSM Incharge : Course Syllabus Modification committee Incharge</span></li>
                    <li><span class="form-label">CSM Member : Course Syllabus Modification committee Member</span></li>
                    </ul-->
                </div>
                </div>
           
        </div>
    </div>
</div>
<!-- Add Group popup -->
   <!-- Optional JS -->
    <script type="text/javascript" src="{% static 'assets/vendor/select2/select2.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/jquery.dataTables.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/dataTables.buttons.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/buttons.flash.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/jszip.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/pdfmake.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/vfs_fonts.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/buttons.html5.min.js' %}"></script>
  <script type="text/javascript" language="javascript" src="{% static '/assets/vendor/datatable/js/buttons.print.min.js' %}"></script>
<script>
$(document).ready(function () {
	//{% for j in course_categories %}
	//$('#example'+'{{forloop.counter}}').dataTable({
		//	"paging": false,"bInfo": false,
		//});

    //{%endfor%}
	$("#op_elective_category").select2();
	$('.table').dataTable({
			"paging": false,"bInfo": false,
		});
	
});
		$('.add_basket_button').click(function(){
			//alert('add_basket_popup')
			$('#add_basket_form')[0].reset();
			$("#staticModalLabelbasket").html('Create New Basket');
			var course_category_id = this.id;
			$("#course_category_id").val(course_category_id)
			$("#add_basket_popup").modal('show')
			
		})
		$(".edit_basket").click(function(){
			var id = this.id;
			var array = id.split('-');
			$("#basket_name").val(array[0])
			$("#choice_count").val(array[1])
			$("#course_type").val(array[2]).trigger('change');
			$("#course_level").val(array[3])
			$("#L").val(array[4])
			$("#T").val(array[5])
			$("#P").val(array[6])
			$("#S").val(array[7])
			$("#J").val(array[8])
			$("#C").val(array[9])
			$("#basket_id").val(array[10])
			$("#staticModalLabelbasket").html('Edit Basket');
			$("#add_basket_popup").modal('show')
			//$('#course_type').val('two').trigger('change');
			
		})
		$('.add_group_button').click(function(){
			$('#add_group_form')[0].reset();
			$("#staticModalLabelgroup").html('Create New Group');
			var id = this.id;
			var array = id.split('-');
			$("#group_course_category_id").val(array[0])
			$("#add_group_popup_table").html($("#"+array[1]).html())
			$('#add_group_popup_table td:nth-child(2)').show();
			$('#add_group_popup_table th:nth-child(2)').show();
			$('#add_group_popup_table td:nth-child(13)').hide();
			$('#add_group_popup_table th:nth-child(13)').hide();
			$("#add_group_popup").modal('show')
			
			
		})
		$(".create_group_submit").click(function(){
		   if ($("#add_group_form input:checkbox:checked:not(:disabled)").length == 0){
			   alert('Plase Select atleast one Course');
			   return false;
		   }else{
			$("#add_group_form").submit()
		   }
		})
		$(".edit_group").click(function(){
			var id = this.id;
			var array = id.split('-');
			$("#basket_name").val(array[0])
			$("#choice_count").val(array[1])
			$("#course_type").val(array[2]).trigger('change');
			$("#course_level").val(array[3])
			$("#L").val(array[4])
			$("#T").val(array[5])
			$("#P").val(array[6])
			$("#S").val(array[7])
			$("#J").val(array[8])
			$("#C").val(array[9])
			$("#basket_id").val(array[10])
			$("#staticModalLabelbasket").html('Edit Basket');
			$("#add_basket_popup").modal('show')
			//$('#course_type').val('two').trigger('change');
			
		})
       
        $(".pcmi_forward_bosc").click(function(){
            var str = this.id;
            $("#staticModal1").modal('show')
        })
        $(".message_post").click(function(){
            $("#staticModal").modal('show')
        })
        $(".delete_confirm").click(function(){
            var str = this.id;
            $("#course_del").val(str)
            $("#staticModal_delete").modal('show')
        })
	$(".budget_count").keyup(function() {
            $(".cutom_error").remove();
            budget_error = false;
            sum = 0;
            mul = 0;
            console.log(this.id);
            course_type=$("#course_type").val()
			if (course_type!=6){
				if(this.id == 'L' && $(this).val()>4){
					alert('L value should be less then 5');
					$(this).val('')
					return false;
				}
				else if(this.id== 'T' && $(this).val()>4){
					 alert('T value should be less then 5');
					 $(this).val('')
					return false;
				}
				else if(this.id == 'P' && ($(this).val()!=2 && $(this).val()!=4 && $(this).val()!=6)){
					 alert('P value should be 2 or 4 or 6');
					 $(this).val('')
					return false;
				}
				else if(this.id=='J' && $(this).val()>19){
					 alert('J value should be less then 20');
					 $(this).val('')
					return false;
				}
				else if(this.id=='S' && $(this).val()>9){
					 alert('S value should be less then 10');
					 $(this).val('')
					return false;
				}
			}
            if(course_type == 1){
                if ((Number($("#L").val())+Number($("#T").val()))> 4 ){
                    alert('L+T value should be less then 5');
                    $(this).val('')
                    return false;
                }else{
                    $("#C").val(Number($("#L").val())+Number($("#T").val()))
                }
            }else if(course_type ==2){

                 $("#C").val(Number($("#P").val())*0.5)
            }else if(course_type ==3){
                l = $("#L").val();
                t = $("#T").val();
                p = $("#P").val();
                sum = (Number(l) + Number(t)) + Number(p*0.5)
                $("#C").val(sum)

            }
			//else if(course_type ==4){
            //    $("#C").val(Number($("#J").val())/4)
            //}
			else if(course_type ==5){
                $("#C").val(Number($("#S").val()))
            }
			else if(course_type ==6){
                $("#C").val(0)
            }
    })
	$("#course_type").change(function () {
		onchangeTypeCourse($(this).val())
	})	
	function onchangeTypeCourse(course_type) {
		pass_fail=$('input[name="pass_fail"]:checked').val();
		if (pass_fail==1){
		     $("#T,#P,#J,#L,#S").prop("disabled", false);
            $("#T,#P,#J,#L,#S").prop("readonly", false);
			$("#C").prop("readonly", true);
            $("#C").val(0)
            return false
        }
		if(course_type != 4){
			$("#C").prop("readonly", true);
		}else{
			$("#C").prop("readonly", false);
		}
        if(course_type == 1){

            $("#L,#T").prop("disabled", false);
            $("#P,#J,#S").prop("disabled", true);
            $("#C").val(Number($("#L").val())+Number($("#T").val()))
        }else if(course_type ==2){
            $("#P").prop("disabled", false);
            $("#L,#T,#J,#S").prop("disabled", true);
            $("#C").val(Number($("#P").val())*0.5)
        }else if(course_type ==3){
            $("#L,#T,#P").prop("disabled", false);
            $("#J,#S").prop("disabled", true);
            l = $("#L").val();
            t = $("#T").val();
            p = $("#P").val();
            sum = (Number(l) + Number(t)) + Number(p*0.5)
            $("#C").val(sum)
        }
		else if(course_type ==4){
			$("#C").prop("readonly", false);
			$("#L,#T,#P,#S").prop("disabled", true);
            $("#J").prop("disabled", false);
            $("#J").prop("readonly", true);
            $("#J").val(1);

        }
		else if(course_type ==5){

			$("#T,#P,#J,#L").prop("disabled", true);
			$("#J").prop("readonly", false);
            $("#S").prop("disabled", false);
            $("#C").val(Number($("#S").val()))
        }
		else if(course_type ==6){
            $("#T,#P,#J,#L,#S").prop("disabled", false);
            $("#T,#P,#J,#L,#S").prop("readonly", false);
			$("#C").prop("readonly", true);
            $("#C").val(0)
        }
    }



    </script>
{% endblock %}